FROM node:16@sha256:d042e99692358a03928776f5d6fd4230ea71ff163e3f2ba66f02e27f7ed69e74

ARG GIT_SHA

WORKDIR /usr/src/app

COPY . .

ENV NODE_ENV=production
ENV PORT 4000
ENV GIT_SHA=${GIT_SHA}
EXPOSE ${PORT}

CMD ["npm", "start"]
